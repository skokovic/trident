<html>
		<head>
			<meta charset="utf-8">
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    		<link rel="stylesheet" type="text/css" href="static/css/trident.css">
			<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
			<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
			<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
			<link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.6.3/css/all.css' integrity='sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/' crossorigin='anonymous'>
		</head>
		<body>
			<div class="container-fluid" style="width: 100% !important; padding: 0% !important">
				<div class="row">
					 {% include 'navbar.html' %}
				</div>
               <!-- <form method="POST">
                        <div>
                            {% if current_user.is_authenticated %}
                                <h2>Hi, {{ current_user.first_name }} {{ current_user.last_name }}!</h2>
                                <br>
                                <h3>{{ current_user.email }}</h3>
                                <br>
                                <a href="{{ url_for('weather') }}" class="button is-info">Find out the current weather around the world</a>
                                <br>
                                <a href="{{ url_for('logout') }}" class="button is-info">Logout</a>
                            {% else %}
                                <div>
                                    <h1>Who are you?</h1>
                                    <br>
                                    <p><a href="{{ url_for('oauth_authorize', provider='facebook') }}" class="button is-info">Login with Facebook</a></p>
                                </div>
                            {% endif %}
                        </div>
                </form>
                -->
				<div class="row">
					 <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" style="width: 100% !important; padding-right: .5rem 1rem">
						<ol class="carousel-indicators" style="height: 20%">
							{% for movie in upcoming %}
								{% if loop.index0 == 0 %}
									<li data-target="#carouselExampleIndicators" data-slide-to="{{loop.index0}}" class="active"></li>
								{% else %}
									<li data-target="#carouselExampleIndicators" data-slide-to="{{loop.index0}}"></li>
								{% endif %}
							{%endfor%}

						</ol>
						<div class="carousel-inner" style="height: 100%; width: 100% !important">
							{% for movie in upcoming %}
								{% if loop.index0 == 0 %}
									<div class="carousel-item active">
									  	<div style="width:50% !important">
											<img class="d-block w-100 container-fluid" src="http://image.tmdb.org/t/p/w400/{{movie['poster_path']}}" alt="First slide" height="80%">
										</div>
										<div class="carousel_div">
											<div class="title_row">
												<div class="title_carousel">
													{{movie['title']}}
												</div>
											</div>
											<div class="row  movie_overview">
												<div class="col-md-12 text_bg">
													{{movie['overview']}}
												</div>
											</div>
											<div class="row thumb_row">
												<div class="col-md-6 thumb thumb_up" style="">
													<i onclick="like_click('{{movie['title']}}')" class="far fa-thumbs-up"></i>
												</div>

												<div class="col-md-6 thumb thumb_up" style="padding-top:3%">
													<i onclick="dislike_click('{{movie['title']}}')" class="far fa-thumbs-down"></i>
												</div>
											</div>
										</div>
									</div>
								{%else%}
									<div class="carousel-item">
										<div style="width:50%">
											<img class="d-block w-100" src="http://image.tmdb.org/t/p/w400/{{movie['poster_path']}}" alt="Second slide" height="80%">
										</div>
										<div class="carousel_div">
											<div class="title_row">
												<div class="col-md-12 title_carousel ">
													{{movie['title']}}
												</div>
											</div>
											<div class="row  movie_overview">
												<div class="col-md-12 text_bg">
													{{movie['overview']}}
												</div>
											</div>
											<div class="row thumb_row">
												<div class="col-md-6 thumb thumb_up">
													<i onclick="like_click('{{movie['title']}}')" class="far fa-thumbs-up"></i>
												</div>
												<div class="col-md-6 thumb thumb_up" style="padding-top:3%">
													<i onclick="dislike_click('{{movie['title']}}')" class="far fa-thumbs-down"></i>
												</div>
											</div>
										</div>
									</div>
								{%endif%}
							{% endfor %}
						</div>
						<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
							<span class="carousel-control-prev-icon" aria-hidden="true"></span>
							<span class="sr-only">Previous</span>
						</a>
						<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
							<span class="carousel-control-next-icon" aria-hidden="true"></span>
							<span class="sr-only">Next</span>
						</a>
					</div>
				</div>
			</div>
		</body>
</html>

<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : os.environ.get('FACEBOOK_ID'),
      cookie     : true,
      xfbml      : true,
      version    : 'v3.1'
    });
    FB.AppEvents.logPageView();
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));

   function like_click(movie){

		$.ajax({
			type: "POST",
			url: "{{ url_for("movie") }}",
			contentType: "application/json",
			data: JSON.stringify({movie: movie, like: true}),
			dataType: "json",
			success: function(response) {
				console.log(response);
			},
			error: function(err) {
				console.log(err);
			}
		});
   }
   function dislike_click(movie){
		$.ajax({
			type: "POST",
			url: "{{ url_for("movie") }}",
			contentType: "application/json",
			data: JSON.stringify({movie: movie, like: false}),
			dataType: "json",
			success: function(response) {
				console.log(response);
			},
			error: function(err) {
				console.log(err);
			}
		});
   }
</script>